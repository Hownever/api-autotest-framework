name: 创建API的用户灰度PIN
description: 创建API的用户灰度PIN
operationId: creatUserApiGray

variables:
#    url
    host: ${ENV(ENV_BASE_URL)}
    api_ver: ${ENV(ENV_API_VERSION)}
#    header
    header:
        Content-Type: application/json;charset=UTF-8
        x-jdcloud-pin: ${ENV(ENV_PIN)}
#    json
    serviceName: $serviceName
    apiVersion: $apiVersion
    apiName: $apiName
    userPin: $userPin
#    hooks
    product: ompopenapi
    openapi_yaml: nofile
    AK: ${ENV(ENV_AK)}
    SK: ${ENV(ENV_SK)}

request:
    url: $host/$api_ver/userApiGray
    method: POST
    headers: $header
    json:
        serviceName: $serviceName
        apiVersion: $apiVersion
        apiName: $apiName
        userPin: $userPin
setup_hooks:
    - ${hook_update_jdcloud_request($request, $AK, $SK, $product, $apiVersion, $openapi_yaml, $regionId)}
teardown_hooks:
    - ${hook_print("teardown_hooks for config")
