name: 根据云翼服务树中应用名称查询分组和实例
variables:
    host: ${ENV(ENV_ARK_WEB_BASE_URL)}
    expected_status_code: 200
    appname: jdmesh-productpage-test
    headers:
        AUTH-TOKEN: ${ENV(ENV_ARK_API_TOKEN)}
        AUTH-APP-ID: mircoservice
    cookies:
         _ga: ${ENV(ENV_COOKIES)}
request:
    url: $host/lord/api/v1/lord/tree/queryInsTreeByAppName?appname=$appname
    method: POST
    headers: $headers
    cookies: $cookies

    json:
        nodeApp: $appname
        pageIndex: 1
        pageSize: 10
validate:
    - eq: ["status_code", $expected_status_code]
