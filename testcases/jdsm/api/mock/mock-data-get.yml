name: mock server get value
description: |
    get mock server值

variables:
    mock_host: ${ENV(ENV_MOCK_SERVER_BASE_URL)}
    # mock存储的id，使用时的id
    mock_id: you_mock_data_id
    # 是否删除get的value
    remove_after_get: disable

    expected_status_code: 200

    requestid: ${get_timestamp(13)}${gen_random_string(19)}
    headers:
        ajax-id: $requestid
        x-jdcloud-request-id: $requestid
        # X-Jdcloud-Test-Configs-Mock-Setter
        X-Jdcloud-Test-Configs-Mock-Getter: $mock_id
        X-Jdcloud-Test-Configs-Mock-Getter-Remove: $remove_after_get
    global_headers: {"ajax-id": "$requestid", "x-jdcloud-request-id": "$requestid"}

request:
    url: $mock_host/mockserver
    method: GET
    headers: $headers

setup_hooks:
    - ${hook_update_request_insert_global_headers($request, $global_headers)}
